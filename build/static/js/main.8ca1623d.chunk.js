(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),a=t(14),o=t.n(a),u=(t(19),t(3)),i=t(0),s=function(e){var n=e.addPerson;return Object(i.jsx)("button",{type:"submit",onClick:n,children:"Submit"})},l=function(e){var n=e.person,t=e.handleDelete;return Object(i.jsxs)("div",{children:[n.name,": ",n.number,Object(i.jsx)("button",{onClick:function(){return t(n.id,n.name)},children:"Delete"})]})},d=function(e){return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{placeholder:"search...",onChange:e.handleSearch,value:e.search})]})},j=function(e){return Object(i.jsxs)("form",{onSubmit:e.addPerson,children:[Object(i.jsxs)("div",{children:["name:  ",Object(i.jsx)("input",{placeholder:"name",value:e.newPerson,onChange:e.handleNameChange})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{placeholder:"number",value:e.newNumber,onChange:e.handleNumberChange})]})]})},h=function(e){var n=e.message;return null===n?null:Object(i.jsx)("h4",{className:"error",children:n})},b=t(4),f=t.n(b),m="/api/persons",O={getAll:function(){return f.a.get(m)},create:function(e){return f.a.post(m,e)},update:function(e,n){return f.a.put("".concat(m,"/").concat(e),n)},deletePerson:function(e){return f.a.delete("".concat(m,"/").concat(e))}},p=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),b=o[0],f=o[1],m=Object(c.useState)(""),p=Object(u.a)(m,2),x=p[0],v=p[1],g=Object(c.useState)(""),w=Object(u.a)(g,2),P=w[0],C=w[1],N=Object(c.useState)(""),S=Object(u.a)(N,2),k=S[0],y=S[1];Object(c.useEffect)((function(){O.getAll().then((function(e){r(e.data)})).catch((function(e){console.log("Error",e)}))}),[]);var D=t.map((function(e){return e.name})),A=function(e){e.preventDefault();var n={name:b,number:x};if(b)if(x){if(D.includes(b)){if(window.confirm("".concat(b," aleardy exits. Do you want to update phone number?"))){for(var c=0,a=0;a<t.length;a++)t[a].name.includes(b)&&(c=t[a].id);O.update(c,n).then((function(e){r(t.map((function(n){return n.id!==c?n:e.data}))),f(""),v("")})).catch((function(e){y("".concat(n.name," is already removed from Server!"))})),setTimeout((function(){y(null)}),3e3)}}else O.create(n).then((function(e){r(t.concat(e.data)),f(""),v("")})).catch((function(e){y(e.response.data.error)})),setTimeout((function(){y(null)}),3e3)}else alert("Number filed is empty");else alert("Name filed is empty")},E=t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(P.toLowerCase())})),J=function(e,n){var c=t.filter((function(n){return n.id!==e}));window.confirm("Pres OK to delete ".concat(n))&&O.deletePerson(e).then((function(e){r(c)}))};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Phonebook"}),Object(i.jsx)(h,{message:k}),Object(i.jsx)(d,{search:P,handleSearch:function(e){C(e.target.value)}}),Object(i.jsx)("h3",{children:"Add new Perons"}),Object(i.jsx)(j,{addPerson:A,newPerson:b,handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){v(e.target.value)},newNumber:x}),Object(i.jsx)(s,{addPerson:A}),Object(i.jsx)("h3",{children:"Numbers"}),E.map((function(e,n){return Object(i.jsx)(l,{person:e,handleDelete:J},n)}))]})},x=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"App",children:Object(i.jsx)("h1",{children:"Phonebook"})}),Object(i.jsx)(p,{})]})};o.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(x,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.8ca1623d.chunk.js.map